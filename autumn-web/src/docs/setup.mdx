# Setup & Configuration

Configuration commands for moderation logging and staff visibility.

Autumn supports both prefix and slash commands. Examples below use prefix syntax.

## `!setup`
One-command setup: apply a moderation preset that configures your modlog channel, userlog channel, escalation, and word filter in a single step.

**Usage:**
```bash
!setup <basic|standard|strict> [#modlog-channel] [#userlog-channel]
```

**Permission required:** `Manage Server`

**Examples:**
```bash
# Apply standard preset; Autumn finds or creates mod-logs and user-logs
!setup standard

# Apply strict preset with explicit channels
!setup strict #mod-logs #user-logs

# Show preset descriptions
!setup
```

**Presets:**

| Preset | Escalation | Word Filter | Preset Words |
|---|---|---|---|
| `basic` | Disabled | Disabled | — |
| `standard` | Enabled — 3 warns / 24h → auto-timeout, 7d tier window | Enabled — Warn action | Not loaded |
| `strict` | Enabled — 2 warns / 7d → auto-timeout, 30d tier window | Enabled — Timeout action | Loaded |

**What it does:**
- Sets the modlog and userlog channels (mentions existing `mod-logs` / `user-logs` channels, or creates them if missing — requires bot `Manage Channels` permission when auto-creating).
- Enables or disables escalation and applies preset warn/timeout thresholds and windows.
- Enables or disables the word filter and sets the action tier. The `strict` preset also loads the built-in offensive word list.
- AI mention replies (`!aitoggle`) are **not changed** by setup.

You can tune any individual setting afterward with `!modlogchannel`, `!userlogchannel`, `!escalation`, and `!wordfilter`.

---

## `!modlogchannel`
Set, view, or clear the moderation log channel for the current server.

**Usage:**
```bash
!modlogchannel [#channel|channel_id|clear]
```

**Permission required:** `Manage Server`

**Examples:**
```bash
!modlogchannel #mod-logs
!modlogchannel 123456789012345678
!modlogchannel clear
!modlogchannel
```

**What it does:**
- With a channel mention or channel ID, stores that channel as the server modlog target.
- With `clear`, removes the stored modlog channel.
- With no argument, shows the currently configured modlog channel.

If no modlog channel is configured, moderation actions still work; they just won’t be mirrored to a dedicated modlog channel.

---

## `!userlogchannel`
Set, view, or clear the channel used for user message activity logs.

**Usage:**
```bash
!userlogchannel [#channel|channel_id|clear]
```

**Permission required:** `Manage Server`

**Examples:**
```bash
!userlogchannel #user-logs
!userlogchannel 123456789012345678
!userlogchannel clear
!userlogchannel
```

**What it tracks once configured:**
- Message edits
- Message deletions
- Attachment/image deletions

---

## `!wordfilter`
Manage the word filter for this server. Automatically detects and acts on messages containing filtered words.

**Subcommands:**

**`!wordfilter enable`**
Enable the word filter.

**`!wordfilter disable`**
Disable the word filter.

**`!wordfilter action <log|delete|warn|timeout>`**
Set the action taken when a filtered word is detected:
- **log** — Only log the violation to the modlog channel
- **delete** — Delete the message and log the violation
- **warn** — Warn the user, delete the message, and log the violation
- **timeout** — Timeout the user (5 min), delete the message, and log the violation

**`!wordfilter preset <load|clear>`**
Load or clear a curated preset list of commonly offensive words.

**`!wordfilter add <word>`**
Add a custom word to the filter list. Duplicates are rejected.

**`!wordfilter remove <word>`**
Remove a word from the filter list.

**`!wordfilter list`**
Display all currently filtered words (paginated).

**Permission required:** `Manage Server`

All subcommands also work as slash commands (e.g. `/wordfilter enable`).

---

## `!escalation`
Configure automatic warn → timeout escalation. When a user accumulates enough warnings within a time window, they are automatically timed out. Repeated timeouts escalate in duration.

**Subcommands:**

**`!escalation enable`**
Enable automatic escalation.

**`!escalation disable`**
Disable automatic escalation.

**`!escalation set warns <count>`**
Set how many warnings trigger an auto-timeout (default: 3).

**`!escalation set warnwindow <duration>`**
Set the time window for counting warnings (default: 24h). Example: `24h`, `7d`.

**`!escalation set timeoutwindow <duration>`**
Set the time window for timeout escalation tiers (default: 7d). Example: `7d`, `30d`.

**Timeout escalation tiers:**
- 1st auto-timeout → 5 minutes
- 2nd auto-timeout → 30 minutes
- 3rd auto-timeout → 2 hours
- 4th auto-timeout → 1 day
- 5th+ auto-timeout → 1 week

**How it works:**

Once a user reaches the warning threshold (e.g. 3 warnings within 24h), they are automatically timed out. After that, every additional warning within the same window triggers another auto-timeout at an escalated tier — they don't need to reach the threshold again. Once the warn window expires without new warnings, the count resets and they would need to reach the full threshold again.

Timeout tiers are based on how many timeouts the user already has within the timeout window (default 7 days). So a user who keeps getting warned and auto-timed-out will progress through increasingly longer timeouts.

With no subcommand, `!escalation` shows the current configuration.

**Permission required:** `Manage Server`

All subcommands also work as slash commands (e.g. `/escalation enable`).

---

## `!aitoggle`
Enable or disable AI mention replies for the current server.

**Usage:**
```bash
!aitoggle <on|off|status>
```

**Permission required:** `Manage Server`

**Examples:**
```bash
!aitoggle status
!aitoggle off
!aitoggle on
```

When set to `off`, Autumn will ignore mention-triggered LLM replies for that guild even if Ollama is configured.
